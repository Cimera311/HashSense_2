<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HashFarm - Scripts & Tools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="config.js"></script>
    <script src="./priceMatrix.js"></script>
    <script src="src/scripts/skript.js"></script>
    <script src="src/scripts/skriptreferral.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    
    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            console.log("Checking priceMatrixlocal:", window.priceMatrixlocal);
        });
    </script>
    <style>
        /* Sidebar animations */
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .lang-btn.active {
            background: linear-gradient(135deg, rgb(147 51 234) 0%, rgb(168 85 247) 100%);
            color: white;
        }
        
        .lang-btn {
            margin: 0 0.25rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            border: none;
            background: rgb(75 85 99);
            border-radius: 0.5rem;
            color: rgb(209 213 219);
            transition: all 0.2s ease-in-out;
        }
        
        .lang-btn:hover {
            background: rgb(55 65 81);
        }
        
        .accordion {
            margin-top: 1.5rem;
        }
        
        .accordion button {
            background: linear-gradient(135deg, rgb(147 51 234) 0%, rgb(168 85 247) 100%);
            color: white;
            padding: 0.75rem 1rem;
            width: 100%;
            border: none;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
        }
        
        .accordion button:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 20px -5px rgba(147, 51, 234, 0.4);
        }
        
        .accordion-content {
            display: none;
            padding: 1rem;
            background: rgb(31 41 55);
            margin-top: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid rgb(55 65 81);
        }
        
        pre code {
            white-space: pre-wrap;
            word-wrap: break-word;
            background: rgb(17 24 39);
            color: rgb(209 213 219);
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Sidebar -->
    <aside class="sidebar fixed left-0 top-0 w-64 h-full bg-gray-800 z-40 shadow-xl" id="sidebar">
        <div class="p-4">
            <h2 class="text-xl font-bold mb-6 text-purple-400">HashFarm</h2>
            <nav class="space-y-2">
                <!-- Home Button -->
                <a href="index.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons text-blue-400">home</span>
                    <span class="text-white">Main Dashboard</span>
                </a>
                
                <!-- Farm Button -->
                <a href="farm2.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons text-green-400">agriculture</span>
                    <span class="text-white">Mining Farm</span>
                </a>
                
                <!-- HashSense Button -->
                <a href="HashSense.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons text-purple-400">calculate</span>
                    <span class="text-white">HashSense Calculator</span>
                </a>
            </nav>
        </div>
    </aside>

    <!-- Mobile Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" 
         onclick="toggleSidebar()"></div>

    <!-- Header -->
    <header class="bg-gray-800 p-4">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between">
                <!-- Left side - Navigation -->
                <div class="flex items-center gap-4">
                    <button onclick="toggleSidebar()" 
                            class="bg-purple-600 hover:bg-purple-700 p-2 rounded-lg transition-colors duration-200" 
                            title="Open Menu">
                        <span class="material-icons text-white">menu</span>
                    </button>
                    <button onclick="window.location.href='farm2.html'" 
                            class="bg-gray-600 hover:bg-gray-700 p-2 rounded-lg transition-colors duration-200" 
                            title="Back to Farm">
                        <span class="material-icons text-white">arrow_back</span>
                    </button>
                    <h1 class="text-xl font-bold text-white">Scripts & Tools</h1>
                </div>
                
                <!-- Right side - Language Toggle -->
                <div class="flex gap-2">
                    <button id="deBtn" class="lang-btn active">DE</button>
                    <button id="enBtn" class="lang-btn">EN</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-6">
        <div id="deSection" class="bg-gray-800 rounded-xl p-6 shadow-lg">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-purple-400 mb-4">HashFarm Scripts</h1>
                <p class="text-gray-300 text-lg">Exportiere deine GoMining Transaktionen einfach per Script.</p>
            </div>

            <div class="space-y-8">
                <div class="bg-gray-700 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                        <span class="material-icons text-blue-400">info</span>
                        Was macht dieses Script?
                    </h2>
                    <p class="text-gray-300">Mit diesem Script kannst du alle Transaktionen aus deinem GoMining Konto automatisch exportieren. Es durchsucht alle Seiten, sammelt die Daten und erstellt daraus eine CSV-Datei.</p>
                </div>

                <div class="bg-gray-700 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                        <span class="material-icons text-green-400">list</span>
                        Anleitung
                    </h2>
                    <ol class="list-decimal list-inside space-y-2 text-gray-300">
                        <li>Gehe in die <strong class="text-purple-400">Transaktionsübersicht</strong> auf GoMining.</li>
                        <li>Öffne die <strong class="text-purple-400">Console</strong> mit <kbd class="bg-gray-600 px-2 py-1 rounded text-white">F12</kbd> und wähle den Reiter <strong class="text-purple-400">Console</strong>.</li>
                        <li>Füge das gesamte Script in die Console ein und drücke <kbd class="bg-gray-600 px-2 py-1 rounded text-white">Enter</kbd>.</li>
                        <li>Ggf. musst du zuvor das Einfügen erlauben: <em class="text-yellow-400">"allow pasting"</em></li>
                    </ol>
                </div>

                <div class="bg-gray-700 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                        <span class="material-icons text-orange-400">play_arrow</span>
                        Ablauf
                    </h2>
                    <ul class="list-disc list-inside space-y-2 text-gray-300">
                        <li>Das Script startet automatisch und sammelt alle Transaktionen.</li>
                        <li>Es klickt sich automatisch durch alle Seiten.</li>
                        <li>Am Ende wird eine CSV-Datei heruntergeladen.</li>
                    </ul>
                </div>

                <div class="bg-gray-700 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                        <span class="material-icons text-cyan-400">table_chart</span>
                        CSV Aufbau
                    </h2>
                    <p class="text-gray-300 mb-3">Die CSV hat folgende Felder (jeweils mit <strong class="text-purple-400">;</strong> getrennt):</p>
                    <ul class="list-disc list-inside space-y-1 text-gray-300">
                        <li>Datum (Tag/Monat/Jahr)</li>
                        <li>Uhrzeit</li>
                        <li>Typ</li>
                        <li>Wert</li>
                        <li>Währung (GMT oder BTC)</li>
                        <li>Status</li>
                    </ul>
                </div>

                <div class="bg-red-900/30 border border-red-600 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-red-400 mb-4 flex items-center gap-2">
                        <span class="material-icons">stop</span>
                        Export abbrechen
                    </h2>
                    <p class="text-gray-300 mb-3">Falls du den Export stoppen willst, kannst du jederzeit in der Console folgendes eintippen:</p>
                    <div class="bg-gray-800 rounded p-3">
                        <code class="text-red-400">cancelGoMiningExport();</code>
                    </div>
                    <p class="text-gray-300 mt-3">Das Script beendet sich dann nach Abschluss der aktuellen Seite.</p>
                </div>

                <div class="bg-yellow-900/30 border border-yellow-600 rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-yellow-400 mb-3 flex items-center gap-2">
                        <span class="material-icons">warning</span>
                        Hinweis
                    </h2>
                    <p class="text-gray-300">Bitte Geduld haben: Jede Seite braucht etwa 2 Sekunden zum Laden. Bei vielen Transaktionen kann der Export ein paar Minuten dauern.</p>
                </div>
                <div class="accordion">
                    <button onclick="toggleAccordion('deScript')">📜 zeige Skript </button>
                    <div id="deScript" class="accordion-content">
                <pre>
                <code>
                       globalThis.cancelExport = false;
      globalThis.dateFormat = 'eu'; // Default

      function normalizeDate(dateStr, format) {
        if (format === 'eu') {
          if (dateStr.includes('/')) {
            const [d, m, y] = dateStr.split('/');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          } else if (dateStr.includes('.')) {
            const [d, m, y] = dateStr.split('.');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          }
        } else {
          if (dateStr.includes('/')) {
            const [m, d, y] = dateStr.split('/');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          }
        }
        return dateStr;
      }

      (async function () {
        window.cancelGoMiningExport = function () {
          cancelExport = true;
          console.log("Export manually aborted! 🚫");
        };

        function getFirstRowKey() {
          const firstRow = document.querySelector('tbody tr');
          const rawDate = firstRow?.querySelector('datetime-display span.text-muted')?.innerText.trim() || '';
          const date = normalizeDate(rawDate, dateFormat);
          const time = firstRow?.querySelector('datetime-display span.fw-medium')?.innerText.trim() || '';
          const value = firstRow?.querySelector('[data-qa-column="value"] span.hidden-empty.ms-1 > span')?.innerText.trim() || '';
          const pageSpan = document.querySelector('div.w-100.d-flex.align-items-center.justify-content-center span.mx-2.p-2');
          const pageNumber = pageSpan?.innerText.trim() || '';
          return `${pageNumber}_${date}_${time}_${value}`;
        }

        function extractRows() {
          const rows = document.querySelectorAll('tbody tr');
          const extracted = [];

          rows.forEach(row => {
            const time = row.querySelector('datetime-display span.fw-medium')?.innerText.trim() || '';
            const rawDate = row.querySelector('datetime-display span.text-muted')?.innerText.trim() || '';
            const date = normalizeDate(rawDate, dateFormat);
            const type = row.querySelector('[data-qa-column="type"]')?.innerText.trim() || '';

            const valueElement = row.querySelector('[data-qa-column="value"]');
            let valueText = valueElement?.querySelector('span.hidden-empty.ms-1 > span')?.innerText.trim() || '';
            let isNegative = valueText.startsWith('-');
            valueText = valueText.replace('.', '#').replace(/[.,]/g, '').replace('#', ',');
            valueText = valueText.replace('+', '').replace('-', '');
            if (isNegative) {
              valueText = '-' + valueText;
            }

            let currency = '';
            if (valueElement?.querySelector('icon-gmt')) {
              currency = 'GMT';
            } else if (valueElement?.querySelector('icon-bitcoin-circle')) {
              currency = 'BTC';
            }

            const status = row.querySelector('[data-qa-column="status"]')?.innerText.trim() || '';

            extracted.push({ date, time, type, value: valueText, currency, status });
          });

          return extracted;
        }

        function exportToCSV(data) {
          let csv = "Date-DayMonthYear;Date-Time;Type;Value;Currency;Status\n";
          data.forEach(item => {
            csv += `"${item.date}";"${item.time}";"${item.type}";"${item.value}";"${item.currency}";"${item.status}"\n`;
          });

          let filename = "gomining_transactions.csv";
          const dateRangeElement = document.querySelector('.catalog-index_block-filter-item');
          if (dateRangeElement) {
            const dateText = dateRangeElement.innerText
              .trim()
              .replace(/\s+/g, '_')
              .replace(/[,]/g, '')
              .replace(/[^\w\-]/g, '');
            filename = `gomining_${dateText}.csv`;
          }

          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.setAttribute("href", url);
          link.setAttribute("download", filename);
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        async function goMiningAutoExport() {
          let allData = [];
          let previousKey = getFirstRowKey();
          let pageCounter = 1;

          while (true) {
            if (cancelExport) {
              console.log("Export manually aborted! 🚫");
              break;
            }

            console.log(`Page done ${pageCounter}...`);
            allData = allData.concat(extractRows());

            let icon = document.querySelector('icon-arrow-short[direction="right"]');
            let nextButton = icon?.closest('button');

            if (!nextButton || nextButton.disabled) {
              console.log("Button not ready yet. Waiting 5 seconds and trying again...");
              await new Promise(r => setTimeout(r, 5000));
              icon = document.querySelector('icon-arrow-short[direction="right"]');
              nextButton = icon?.closest('button');

              if (!nextButton || nextButton.disabled) {
                console.log("Button still not ready. Waiting again...");
                await new Promise(r => setTimeout(r, 5000));
                icon = document.querySelector('icon-arrow-short[direction="right"]');
                nextButton = icon?.closest('button');

                if (!nextButton || nextButton.disabled) {
                  console.log("Still no button. Exporting current data and stopping.");
                  break;
                }
              }
            }

            nextButton.click();
            if (pageCounter % 10 === 0) {
              console.log(`Short break after page ${pageCounter}...`);
              await new Promise(r => setTimeout(r, 5000));
            } else {
              await new Promise(r => setTimeout(r, 350));
            }

            let newKey = getFirstRowKey();
            if (newKey === previousKey) {
              console.log("Page appears unchanged. Waiting 5 seconds and checking again...");
              await new Promise(r => setTimeout(r, 5000));
              newKey = getFirstRowKey();

              if (newKey === previousKey) {
                console.log("Page still unchanged. Saving final page...");
                allData = allData.concat(extractRows());
                break;
              }
            }

            previousKey = newKey;
            pageCounter++;
          }

          if (allData.length > 0) {
            console.log(`Exporting ${allData.length} transactions...`);
            exportToCSV(allData);
          } else {
            console.log("No data collected to export.");
          }
        }

        await goMiningAutoExport();
      })();
            </code>
                </pre>
                </div>  
            </div>  
            </div>
        </div>
         
  
            <div id="enSection" class="bg-gray-800 rounded-xl p-6 shadow-lg" style="display:none">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-purple-400 mb-4">HashFarm Scripts</h1>
                    <p class="text-gray-300 text-lg">Export your GoMining transactions easily using a script.</p>
                </div>

                <div class="space-y-8">
                    <div class="bg-gray-700 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-white mb-3 flex items-center gap-2">
                            <span class="material-icons text-blue-400">info</span>
                            What does this script do?
                        </h2>
                        <p class="text-gray-300">This script allows you to automatically export all your transactions from your GoMining account. It browses all pages, collects the data, and generates a CSV file.</p>
                    </div>

                    <div class="bg-gray-700 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                            <span class="material-icons text-green-400">list</span>
                            Instructions
                        </h2>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300">
                            <li>Open the <strong class="text-purple-400">Transactions overview</strong> on GoMining.</li>
                            <li>Open the <strong class="text-purple-400">Console</strong> using <kbd class="bg-gray-600 px-2 py-1 rounded text-white">F12</kbd> and select the <strong class="text-purple-400">Console</strong> tab.</li>
                            <li>Paste the entire script into the console and press <kbd class="bg-gray-600 px-2 py-1 rounded text-white">Enter</kbd>.</li>
                        </ol>
                    </div>

                    <div class="bg-gray-700 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                            <span class="material-icons text-orange-400">play_arrow</span>
                            Process
                        </h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-300">
                            <li>The script starts automatically and collects all transactions.</li>
                            <li>It clicks through all pages automatically.</li>
                            <li>At the end, a CSV file is downloaded.</li>
                        </ul>
                    </div>

                    <div class="bg-gray-700 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2">
                            <span class="material-icons text-cyan-400">table_chart</span>
                            CSV structure
                        </h2>
                        <p class="text-gray-300 mb-3">The CSV contains the following fields (each separated by <strong class="text-purple-400">;</strong>):</p>
                        <ul class="list-disc list-inside space-y-1 text-gray-300">
                            <li>Date (day/month/year)</li>
                            <li>Time</li>
                            <li>Type</li>
                            <li>Value</li>
                            <li>Currency (GMT or BTC)</li>
                            <li>Status</li>
                        </ul>
                    </div>

                    <div class="bg-red-900/30 border border-red-600 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-red-400 mb-4 flex items-center gap-2">
                            <span class="material-icons">stop</span>
                            Cancel export
                        </h2>
                        <p class="text-gray-300 mb-3">If you want to stop the export, you can type the following into the console at any time:</p>
                        <div class="bg-gray-800 rounded p-3">
                            <code class="text-red-400">cancelGoMiningExport();</code>
                        </div>
                        <p class="text-gray-300 mt-3">The script will stop after finishing the current page.</p>
                    </div>

                    <div class="bg-yellow-900/30 border border-yellow-600 rounded-lg p-6">
                        <h2 class="text-xl font-semibold text-yellow-400 mb-3 flex items-center gap-2">
                            <span class="material-icons">warning</span>
                            Note
                        </h2>
                        <p class="text-gray-300">Please be patient: Each page takes about 2 seconds to load. With many transactions, the export can take several minutes.</p>
                    </div>
                <div class="accordion">
                    <button onclick="toggleAccordion('enScript')">📜 show Skript </button>
                    <div id="enScript" class="accordion-content">
                <pre>
                    <code>      globalThis.cancelExport = false;
      globalThis.dateFormat = 'us'; // Default

      function normalizeDate(dateStr, format) {
        if (format === 'eu') {
          if (dateStr.includes('/')) {
            const [d, m, y] = dateStr.split('/');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          } else if (dateStr.includes('.')) {
            const [d, m, y] = dateStr.split('.');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          }
        } else {
          if (dateStr.includes('/')) {
            const [m, d, y] = dateStr.split('/');
            return `${y}-${m.padStart(2,'0')}-${d.padStart(2,'0')}`;
          }
        }
        return dateStr;
      }

      (async function () {
        window.cancelGoMiningExport = function () {
          cancelExport = true;
          console.log("Export manually aborted! 🚫");
        };

        function getFirstRowKey() {
          const firstRow = document.querySelector('tbody tr');
          const rawDate = firstRow?.querySelector('datetime-display span.text-muted')?.innerText.trim() || '';
          const date = normalizeDate(rawDate, dateFormat);
          const time = firstRow?.querySelector('datetime-display span.fw-medium')?.innerText.trim() || '';
          const value = firstRow?.querySelector('[data-qa-column="value"] span.hidden-empty.ms-1 > span')?.innerText.trim() || '';
          const pageSpan = document.querySelector('div.w-100.d-flex.align-items-center.justify-content-center span.mx-2.p-2');
          const pageNumber = pageSpan?.innerText.trim() || '';
          return `${pageNumber}_${date}_${time}_${value}`;
        }

        function extractRows() {
          const rows = document.querySelectorAll('tbody tr');
          const extracted = [];

          rows.forEach(row => {
            const time = row.querySelector('datetime-display span.fw-medium')?.innerText.trim() || '';
            const rawDate = row.querySelector('datetime-display span.text-muted')?.innerText.trim() || '';
            const date = normalizeDate(rawDate, dateFormat);
            const type = row.querySelector('[data-qa-column="type"]')?.innerText.trim() || '';

            const valueElement = row.querySelector('[data-qa-column="value"]');
            let valueText = valueElement?.querySelector('span.hidden-empty.ms-1 > span')?.innerText.trim() || '';
            let isNegative = valueText.startsWith('-');
            valueText = valueText.replace('.', '#').replace(/[.,]/g, '').replace('#', ',');
            valueText = valueText.replace('+', '').replace('-', '');
            if (isNegative) {
              valueText = '-' + valueText;
            }

            let currency = '';
            if (valueElement?.querySelector('icon-gmt')) {
              currency = 'GMT';
            } else if (valueElement?.querySelector('icon-bitcoin-circle')) {
              currency = 'BTC';
            }

            const status = row.querySelector('[data-qa-column="status"]')?.innerText.trim() || '';

            extracted.push({ date, time, type, value: valueText, currency, status });
          });

          return extracted;
        }

        function exportToCSV(data) {
          let csv = "Date-DayMonthYear;Date-Time;Type;Value;Currency;Status\n";
          data.forEach(item => {
            csv += `"${item.date}";"${item.time}";"${item.type}";"${item.value}";"${item.currency}";"${item.status}"\n`;
          });

          let filename = "gomining_transactions.csv";
          const dateRangeElement = document.querySelector('.catalog-index_block-filter-item');
          if (dateRangeElement) {
            const dateText = dateRangeElement.innerText
              .trim()
              .replace(/\s+/g, '_')
              .replace(/[,]/g, '')
              .replace(/[^\w\-]/g, '');
            filename = `gomining_${dateText}.csv`;
          }

          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.setAttribute("href", url);
          link.setAttribute("download", filename);
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        async function goMiningAutoExport() {
          let allData = [];
          let previousKey = getFirstRowKey();
          let pageCounter = 1;

          while (true) {
            if (cancelExport) {
              console.log("Export manually aborted! 🚫");
              break;
            }

            console.log(`Page done ${pageCounter}...`);
            allData = allData.concat(extractRows());

            let icon = document.querySelector('icon-arrow-short[direction="right"]');
            let nextButton = icon?.closest('button');

            if (!nextButton || nextButton.disabled) {
              console.log("Button not ready yet. Waiting 5 seconds and trying again...");
              await new Promise(r => setTimeout(r, 5000));
              icon = document.querySelector('icon-arrow-short[direction="right"]');
              nextButton = icon?.closest('button');

              if (!nextButton || nextButton.disabled) {
                console.log("Button still not ready. Waiting again...");
                await new Promise(r => setTimeout(r, 5000));
                icon = document.querySelector('icon-arrow-short[direction="right"]');
                nextButton = icon?.closest('button');

                if (!nextButton || nextButton.disabled) {
                  console.log("Still no button. Exporting current data and stopping.");
                  break;
                }
              }
            }

            nextButton.click();
            if (pageCounter % 10 === 0) {
              console.log(`Short break after page ${pageCounter}...`);
              await new Promise(r => setTimeout(r, 5000));
            } else {
              await new Promise(r => setTimeout(r, 350));
            }

            let newKey = getFirstRowKey();
            if (newKey === previousKey) {
              console.log("Page appears unchanged. Waiting 5 seconds and checking again...");
              await new Promise(r => setTimeout(r, 5000));
              newKey = getFirstRowKey();

              if (newKey === previousKey) {
                console.log("Page still unchanged. Saving final page...");
                allData = allData.concat(extractRows());
                break;
              }
            }

            previousKey = newKey;
            pageCounter++;
          }

          if (allData.length > 0) {
            console.log(`Exporting ${allData.length} transactions...`);
            exportToCSV(allData);
          } else {
            console.log("No data collected to export.");
          }
        }

        await goMiningAutoExport();
      })();</code>
                </pre>
            </div>
                </div>
            </div>
    </main>
    <!-- Footer -->
    <footer class="bg-gray-800 p-6 mt-8 text-center text-gray-400">
        <p>&copy; 2024 HashFarm | Helping you mine smarter.</p>
    </footer>

    <script>
        // Sidebar toggle function
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }
    </script>

    <script>
        const deBtn = document.getElementById('deBtn');
        const enBtn = document.getElementById('enBtn');
        const deSection = document.getElementById('deSection');
        const enSection = document.getElementById('enSection');

        deBtn.addEventListener('click', () => {
            deSection.style.display = 'block';
            enSection.style.display = 'none';
            deBtn.classList.add('active');
            enBtn.classList.remove('active');
        });

        enBtn.addEventListener('click', () => {
            deSection.style.display = 'none';
            enSection.style.display = 'block';
            enBtn.classList.add('active');
            deBtn.classList.remove('active');
        });
        function toggleAccordion(id) {
                const content = document.getElementById(id);
                content.style.display = content.style.display === 'block' ? 'none' : 'block';
            }
    </script>
</body>
</html>
