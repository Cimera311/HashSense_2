<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoMining Reinvestment Calculator - HashSense</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="priceMatrix.js"></script>
    <script src="src/scripts/skript.js"></script>
    <script src="src/scripts/greedy-scripts.js"></script>
    <script src="src/scripts/reinvest-calculator.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plausible Analytics -->
    <script defer data-domain="hashfarm.me" src="https://plausible.io/js/script.js"></script>

    <!-- Open Graph Meta -->
    <meta property="og:title" content="GoMining Reinvestment Calculator – HashFarm">
    <meta property="og:description" content="Calculate GoMining reinvestment strategies with 5% bonus and optimize your Bitcoin mining growth.">
    <meta property="og:image" content="https://hashfarm.me/assets/preview.png">
    <meta property="og:url" content="https://hashfarm.me/reinvest-calculator.html">
    <meta property="og:type" content="website">

    <meta name="description" content="Advanced GoMining reinvestment calculator with 5% auto-reinvest bonus. Compare strategies: Auto, Manual, Controlled Auto, and BTC accumulation. Optimize your Bitcoin mining growth with detailed projections and charts.">
    <meta name="keywords" content="GoMining calculator, Bitcoin mining reinvestment, GMT token, crypto mining strategy, BTC accumulation, mining profitability, reinvestment bonus, mining calculator">

    <link rel="canonical" href="https://hashfarm.me/reinvest-calculator.html">
    <script type="application/ld+json">
        {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "GoMining Reinvestment Calculator",
        "description": "Calculate and optimize GoMining reinvestment strategies with multiple approaches including automatic 5% bonus reinvestment, manual control, and BTC accumulation phases.",
        "url": "https://hashfarm.me/reinvest-calculator.html",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Auto Reinvestment with 5% Bonus",
            "Manual Reinvestment Strategy",
            "Controlled Auto Strategy",
            "BTC Accumulation Phase",
            "Greedy Miner Support",
            "Interactive Charts",
            "Detailed Timeline Projections"
        ]
        }
    </script>
    <meta name="author" content="HashSense">
    <meta name="robots" content="index, follow">
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">

    <!-- Google Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <style>
        /* Range Slider Styling */
        input[type="range"] {
            outline: none !important;
            scroll-margin: 0 !important;
            scroll-padding: 0 !important;
            pointer-events: auto;
        }
        
        input[type="range"]:focus {
            outline: none !important;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }

        /* Sidebar Styling */
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .sidebar.open {
            transform: translateX(0);
        }

        /* Table Styling */
        .results-table th,
        .results-table td {
            padding: 8px 12px;
            text-align: right;
            border-bottom: 1px solid #374151;
        }
        
        .results-table th {
            background-color: #1f2937;
            font-weight: 600;
            color: #d1d5db;
        }
        
        .results-table tbody tr:hover {
            background-color: #374151;
        }

        /* Strategy Cards */
        .strategy-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .strategy-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .strategy-card.selected {
            border: 2px solid #8b5cf6;
            background-color: #1e1b4b;
        }
        /* Improved Toggle Switch Styling */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #4b5563;
            transition: 0.3s;
            border-radius: 12px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        input:checked + .toggle-slider {
            background-color: #8b5cf6;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Orange variant for v2 */
        .toggle-slider.orange input:checked + .toggle-slider {
            background-color: #f97316;
        }

        /* Green variant for Greedy */
        input:checked + .toggle-slider.green {
            background-color: #16a34a;
        }
        /* iOS Style Toggle Switch 
        #save-first-toggle:checked + label .dot {
            transform: translateX(24px);
            background-color: #8b5cf6;
        }

        #save-first-toggle:checked + label div:first-child {
            background-color: #6d28d9;
        }

        .dot {
            transition: all 0.3s ease-in-out;
        }
            #save-first-toggle-v2:checked + label .dot {
            transform: translateX(1.5rem);
        }
        #save-first-toggle-v2:checked + label > div {
            background-color: rgb(249, 115, 22); /* Orange 
        } 
        */
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">

    <!-- Header with Price Cards -->
    <header class="bg-gray-800 p-4">
        <div class="max-w-7xl mx-auto">
            <!-- Header with Burger Button -->
            <div class="flex items-center justify-between mb-4">
                <button onclick="toggleSidebar()" 
                        class="bg-gray-700 hover:bg-gray-600 p-2 rounded-lg transition-colors duration-200">
                    <span class="material-icons text-white">menu</span>
                </button>
                <h1 class="text-xl font-bold text-white">GoMining Reinvestment Calculator</h1>
                <div class="w-10"></div> <!-- Spacer for centering -->
            </div>
            
            <!-- Price Cards Grid -->
            <div class="grid gap-4 md:grid-cols-3 mb-4">
                <!-- BTC Price Card -->
                <div class="bg-gray-700 rounded-xl p-4 shadow-lg">
                    <h2 class="text-sm font-semibold mb-3 text-gray-300">CURRENT BITCOIN PRICE</h2>
                    <div class="flex items-center gap-3">
                        <img src="bitcoin-910307_1280.webp" alt="BTC" class="w-10 h-10">
                        <select id="bitcoin-price-dropdown" onchange="updateBTCPrice();" 
                                class="flex-1 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="10000">10,000 $</option>
                            <option value="20000">20,000 $</option>
                            <option value="30000">30,000 $</option>    
                            <option value="40000">40,000 $</option>
                            <option value="50000">50,000 $</option>
                            <option value="60000">60,000 $</option>   
                            <option value="70000">70,000 $</option>
                            <option value="80000">80,000 $</option>
                            <option value="90000">90,000 $</option>
                            <option id="currentp" value="0">current price</option>
                            <option value="100000">100,000 $</option>
                            <option value="110000">110,000 $</option>
                            <option value="120000">120,000 $</option>
                            <option value="130000">130,000 $</option>
                            <option value="140000">140,000 $</option>
                            <option value="150000">150,000 $</option>
                            <option value="160000">160,000 $</option>
                            <option value="200000">200,000 $</option>
                            <option value="250000">250,000 $</option>
                            <option value="300000">300,000 $</option>
                            <option value="400000">400,000 $</option>   
                        </select>
                    </div>
                </div>

                <!-- GMT Price Card -->
                <div class="bg-gray-700 rounded-xl p-4 shadow-lg">
                    <h2 class="text-sm font-semibold mb-3 text-gray-300">CURRENT GMT PRICE</h2>
                    <div class="flex items-center gap-3">
                        <img src="GoMining_Logo.webp" alt="GMT" class="w-10 h-10">
                        <input type="number" id="gmt-token-price" placeholder="0.4269" step="0.0001" value="0.4269"
                               class="flex-1 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>

                <!-- SAT per TH Card -->
                <div class="bg-gray-700 rounded-xl p-4 shadow-lg">
                    <h2 class="text-sm font-semibold mb-3 text-gray-300">SAT PER TH</h2>
                    <div class="flex items-center gap-3">
                        <img src="sats-ordinals-sats-logo.png" alt="⚡" class="w-10 h-10">
                        <input type="number" id="sat-TH" value="42" min="0" step="1"
                               class="flex-1 bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar fixed left-0 top-0 w-64 h-full bg-gray-800 z-40 shadow-xl" id="sidebar">
        <div class="p-4">
            <h2 class="text-xl font-bold mb-6 text-purple-400">HashSense</h2>
            <nav class="space-y-2">
                <!-- Home Button -->
                <a href="index.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons">home</span>
                    <span>Home</span>
                </a>

                <!-- Mining Calculator -->
                <a href="HashSense.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons">calculate</span>
                    <span>Mining Calculator</span>
                </a>

                <!-- Reinvestment Calculator (Active) -->
                <a href="reinvest-calculator.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg transition-colors duration-200 bg-purple-600 text-left">
                    <span class="material-icons">trending_up</span>
                    <span>Reinvestment Calculator</span>
                </a>

                <!-- Support -->
                <a href="support.html" 
                   class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-700 transition-colors duration-200 text-left">
                    <span class="material-icons">support</span>
                    <span>Support</span>
                </a>
            </nav>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-4 space-y-6">
<section class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
    <button onclick="toggleSeoContent()" class="w-full p-4 flex items-center justify-between hover:bg-gray-750 transition-colors">
        <h1 class="text-2xl font-bold text-purple-400">About This GoMining Calculator</h1>
        <span id="seo-toggle-icon" class="material-icons text-purple-400">expand_more</span>
    </button>
    
    <div id="seo-content" class="hidden p-6 pt-0 border-t border-gray-700">
        <div class="prose prose-invert max-w-none text-gray-300">
            <p class="mb-4">
                This calculator helps you plan and compare different <strong>GoMining reward strategies</strong>. GoMining offers four ways to receive your mining rewards, each with different advantages:
            </p>
            
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-700 p-3 rounded-lg">
                    <h3 class="text-lg font-semibold text-blue-400 mb-2">1. BTC Rewards Only</h3>
                    <p class="text-sm">Receive rewards in BTC and pay maintenance in BTC. Simple and straightforward.</p>
                </div>
                
                <div class="bg-gray-700 p-3 rounded-lg">
                    <h3 class="text-lg font-semibold text-orange-400 mb-2">2. BTC Accumulation</h3>
                    <p class="text-sm">Get full rewards as BTC, pay maintenance from GMT wallet. Requires GMT balance from saving phases.</p>
                </div>
                
                <div class="bg-gray-700 p-3 rounded-lg">
                    <h3 class="text-lg font-semibold text-purple-400 mb-2">3. GMT Reinvest</h3>
                    <p class="text-sm">Receive rewards as GMT and use it to pay maintenance. Build up your GMT buffer.</p>
                </div>
                
                <div class="bg-gray-700 p-3 rounded-lg">
                    <h3 class="text-lg font-semibold text-green-400 mb-2">4. Auto TH Reinvest</h3>
                    <p class="text-sm">Reinvest rewards into TH with <strong>5% bonus</strong>. Pay maintenance from GMT wallet for maximum growth.</p>
                </div>
            </div>
            
            <p class="text-sm mb-4">
                Our calculator lets you simulate combinations of these strategies over time. Compare automatic reinvestment with the 5% bonus against manual approaches, or create custom cycles that alternate between TH growth, BTC accumulation, and GMT saving phases.
            </p>
            
            <div class="bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-3 text-sm">
                <strong class="text-yellow-400">⚠️ Important:</strong> This is a planning tool only. Results depend on Bitcoin price, network difficulty, and GoMining parameters. Always do your own research (DYOR) and make informed decisions based on your individual situation.
            </div>
        </div>
    </div>
</section>
        <!-- Input Parameters Section -->
        <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold mb-6 text-purple-400">Starting Parameters</h2>
            
            <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-5">
                <!-- GMT Wallet Balance -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">GMT Wallet Balance</label>
                    <input type="number" id="gmt-wallet-balance" value="0" min="0" step="0.01" 
                           class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>

                <!-- Farm Total TH -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">Total Farm TH</label>
                    <input type="number" id="farm-total-th" value="10" min="0.1" step="0.1" 
                           class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>

                <!-- Farm Average Efficiency -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">Farm Avg. Efficiency (W/TH)</label>
                    <input type="number" id="farm-efficiency" value="20.00" min="15" max="50" step="0.01" 
                           class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>

                <!-- Target Miner TH -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">Target Miner TH</label>
                    <input type="number" id="miner-th" value="1" min="0.1" step="0.1" 
                           class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>

                <!-- Target Miner Efficiency -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">Target Miner Efficiency (W/TH)</label>
                    <select id="miner-efficiency" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <option value="15" selected>15 W/TH</option>
                        <option value="16">16 W/TH</option>
                        <option value="17">17 W/TH</option>
                        <option value="18">18 W/TH</option>
                        <option value="19">19 W/TH</option>
                        <option value="20">20 W/TH</option>
                    </select>
                </div>
                <!-- Discount -->
                <div>
                    <label for="gomining-discount-reinvest" class="block text-sm font-medium mb-2">GoMining Maintenance Discount (%)</label>
                    <input type="number" id="gomining-discount-reinvest" value="10.41" min="0" max="30.5" step="0.01" placeholder="10.41" 
                        oninput="syncFieldAndSlider(event, 'gomining-discount-reinvest', 'gomining-discount-slider-reinvest');"
                        class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 mb-3 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <input type="range" id="gomining-discount-slider-reinvest" min="0" max="30.5" step="0.01" value="10.41" tabindex="-1" 
                        oninput="syncFieldAndSlider(event, 'gomining-discount-reinvest', 'gomining-discount-slider-reinvest');"
                        class="w-full accent-purple-500">
                </div>
                <!-- Calculation Period -->
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-300">Calculation Period</label>
                    <div class="flex gap-2">
                        <input type="number" id="calculation-period" value="365" min="1" step="1"
                            class="flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                        <select id="chart-period" onchange="updatePeriodLabel()" class="bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white">
                            <option value="daily">Days</option>
                            <option value="weekly">Weeks</option>
                            <option value="monthly">Months</option>
                            <option value="yearly">Years</option>
                        </select>
                    </div>
                    <div class="text-xs text-gray-400">Enter number of periods to calculate</div>
                </div>
            </div>
        <!-- NEU: Erweiterte Greedy Miner Checkbox Section -->
        <div class="mt-6 p-4 bg-gray-700 rounded-lg" >   <!-- style="display: none; -->
            <div class="flex items-start gap-3">
                <div class="flex items-center h-6">
                    <input type="checkbox" id="greedy-miner-enabled" onchange="toggleGreedyOptions()"
                        class="w-4 h-4 text-green-600 bg-gray-600 border-gray-500 rounded focus:ring-green-500 focus:ring-2">
                </div>
                <div class="flex-1">
                    <label for="greedy-miner-enabled" class="text-sm font-medium text-gray-300 cursor-pointer">
                        I am greedy and I have a greedy! 🤑
                    </label>
                    <div class="text-xs text-gray-400 mt-1">
                        Enable automatic 0.12% TH growth every Tuesday
                    </div>
                </div>
            </div>
             
            <!-- Greedy Options (hidden by default) -->
            <div id="greedy-options" class="mt-4 space-y-4" style="display: none;">
                <!-- Greedy Target Switch -->
                <div class="p-3 bg-gray-800 rounded-lg">
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Greedy Miner Configuration</label>
                        <div class="flex items-center gap-3">
                            <span class="text-sm text-gray-400">Target Miner is NOT the Greedy</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="target-is-greedy-toggle" onchange="updateGreedyConfig()">
                                <span class="toggle-slider" style="background-color: #059669;"></span>
                            </label>
                            <span class="text-sm text-gray-400">Target Miner IS the Greedy</span>
                        </div>
                        <div class="text-xs text-gray-400" id="greedy-config-description">
                            Target miner and greedy miner are separate miners
                        </div>
                               <!-- NEU: Greedy Growth Rate Input -->
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-300">Predicted Greedy Growth (% per Tuesday)</label>
                            <input type="number" id="greedy-growth-rate" value="0.12" min="0" max="5" step="0.01" 
                                class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-green-500"
                                oninput="updateGreedyConfig()">
                            <div class="text-xs text-gray-400">
                                Weekly growth percentage based on recent GoMining performance
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Separate Greedy TH Input (shown when target is NOT greedy) -->
                <div id="separate-greedy-section" class="p-3 bg-gray-800 rounded-lg">
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">The Total TH of all my Greedys -- yes there are some really greedy miners out there</label>
                        <input type="number" id="greedy-miner-th" value="10.00000000" min="1" step="0.00000001" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-green-500">
                       <input type="number" id="greedy-miner-efficiency" value="20.00" min="15.00" step="0.01" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-green-500">
                        <div class="text-xs text-gray-400">
                            TH and W/TH amount of your separate greedy miner (grows by 0.12% every Tuesday)
                        </div>
                    </div>
                </div>
                
                <!-- Greedy Summary -->
                <div class="p-3 bg-green-900/20 border border-green-500/30 rounded-lg">
                    <div class="text-sm text-green-400 font-medium" id="greedy-summary">
                        Configuration: Target Miner (1.0 TH) + Separate Greedy (1.0 TH) = 2.0 TH total with greedy growth
                    </div>
                </div>
            </div>

        </section>

        <!-- Reinvestment Strategy Selection -->
        <section class="bg-gray-800 rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold mb-6 text-purple-400">Reinvestment Strategy</h2>

            <div class="grid gap-4 md:grid-cols-4 lg:grid-cols-4">
                <!-- Automatic Reinvestment -->
                <div class="strategy-card bg-gray-700 rounded-lg p-4 border-2 border-transparent" 
                     onclick="selectStrategy('auto')">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-icons text-green-400">autorenew</span>
                        <h3 class="font-bold">Automatic Reinvest</h3>
                    </div>
                    <p class="text-sm text-gray-300 mb-3">100% daily reward reinvested with 5% bonus, maintenance costs deducted from GMT Wallet</p>
                    <div class="text-green-400 font-bold">+5% Bonus</div>
                </div>

                <!-- Manual Reinvestment -->
                <div class="strategy-card bg-gray-700 rounded-lg p-4 border-2 border-transparent" 
                     onclick="selectStrategy('manual')">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-icons text-blue-400">build</span>
                        <h3 class="font-bold">Manual Reinvest</h3>
                    </div>
                    <p class="text-sm text-gray-300 mb-3">Manual reinvestment of daily profits</p>
                    <div class="text-blue-400 font-bold">No Bonus</div>
                </div>

                <!-- Controlled Auto Reinvestment -->
                <div class="strategy-card bg-gray-700 rounded-lg p-4 border-2 border-transparent selected" 
                     onclick="selectStrategy('controlled')">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-icons text-purple-400">tune</span>
                        <h3 class="font-bold">Controlled Auto</h3>
                    </div>
                    <p class="text-sm text-gray-300 mb-3">Mix of auto reinvest(with 5% TH bonus) and saving for maintenance</p>
                    <div class="text-purple-400 font-bold">Customizable</div>
                </div>
            
                        <!-- Controlled Auto v2 Reinvestment -->
                <div class="strategy-card bg-gray-700 rounded-lg p-4 border-2 border-transparent" 
                    onclick="selectStrategy('controlledv2')">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-icons text-orange-400">schedule</span>
                        <h3 class="font-bold">Controlled Auto + BTC</h3>
                    </div>
                    <p class="text-sm text-gray-300 mb-3">Advanced strategy with TH reinvest, BTC accumulation, and GMT saving phases</p>
                    <div class="text-orange-400 font-bold">3-Phase Cycle</div>
                </div>
            </div>
            

            <!-- Controlled Strategy Settings -->
            <div id="controlled-settings" class="mt-6 p-4 bg-gray-700 rounded-lg">
                <h4 class="font-bold mb-4 text-purple-400">Controlled Auto Settings</h4>
                <div class="grid gap-4 md:grid-cols-2">
                    <!-- Auto Reinvest Days -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Auto Reinvest Days (with 5% bonus)</label>
                        <input type="range" id="auto-days" min="0" max="30" value="15" step="1" oninput="updateControlledSettings()"
                               class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-sm text-gray-400">
                            <span>0</span>
                            <span id="auto-days-value" class="font-bold text-purple-400">15 days</span>
                            <span>30</span>
                        </div>
                    </div>
                    <!-- Improved Cycle Mode Toggle -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Cycle Mode</label>
                        <div class="flex items-center gap-3">
                            <span class="text-sm text-gray-400">Auto First</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="save-first-toggle" onchange="updateCycleMode()">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="text-sm text-gray-400">Save First</span>
                        </div>
                        <div class="text-xs text-gray-400" id="cycle-description">
                            Start with auto-reinvest days, then save for maintenance
                        </div>
                    </div>
                    <!-- Saving Days -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Saving Days (accumulate GMT for electricity)</label>
                        <div class="text-sm text-gray-400 mt-2">
                            Saving Days: <span id="saving-days-value" class="font-bold text-blue-400">10 days</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controlled Reinvest v2 Settings -->
            <div id="controlledv2-settings" class="mt-6 p-4 bg-gray-700 rounded-lg" style="display: none;">
                <h4 class="font-bold mb-4 text-orange-400">Controlled Auto v2 Settings</h4>
                
                <div class="grid gap-4 md:grid-cols-3">
                    <!-- Reinvest in TH Days -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Reinvest in TH Days (with +5% bonus)</label>
                        <input type="number" id="controlled-reinvest-days-v2" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500" 
                            value="6" min="0" max="30" oninput="updateControlledV2Settings()">
                        <div class="text-xs text-gray-400">Reward → TH with 5% bonus<br>Maintenance from GMT wallet</div>
                    </div>

                    <!-- Reward in BTC Days -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Reward in BTC Days</label>
                        <input type="number" id="btc-reward-days-v2" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-orange-500" 
                            value="4" min="0" max="30" oninput="updateControlledV2Settings()">
                        <div class="text-xs text-gray-400">Reward → BTC wallet<br>Maintenance from GMT wallet</div>
                    </div>

                    <!-- Saving Days -->
                    <div class="space-y-2">
                        <label class="text-sm font-medium text-gray-300">Saving Days (Reinvest in GMT)</label>
                        <input type="number" id="controlled-saving-days-v2" 
                            class="w-full bg-gray-600 border border-gray-500 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-green-500" 
                            value="20" min="0" max="30" oninput="updateControlledV2Settings()">
                        <div class="text-xs text-gray-400">Reward → GMT wallet<br>Maintenance from GMT wallet</div>
                    </div>
                </div>
                <!-- Improved V2 Cycle Mode Toggle -->
                <div class="mt-4 space-y-2">
                    <label class="text-sm font-medium text-gray-300">Cycle Mode</label>
                    <div class="flex items-center gap-3">
                        <span class="text-sm text-gray-400">TH First</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="save-first-toggle-v2" onchange="updateCycleModeV2()">
                            <span class="toggle-slider orange"></span>
                        </label>
                        <span class="text-sm text-gray-400">Save First</span>
                    </div>
                    <div class="text-xs text-gray-400" id="cycle-description-v2">
                        Start with TH reinvest, then BTC accumulation, then GMT saving
                    </div>
                </div>
                <!-- Total Days Display -->
                <div class="mt-4 p-3 bg-gray-800 rounded-lg">
                    <div class="text-sm text-gray-400">
                        Total Cycle Duration: <span id="controlled-total-days-v2" class="font-bold text-orange-400">30 days</span>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="cycle-order-v2">
                        Phase 1: <span id="phase1-summary" class="text-blue-400">6d TH reinvest</span> → 
                        Phase 2: <span id="phase2-summary" class="text-orange-400">4d BTC accumulation</span> → 
                        Phase 3: <span id="phase3-summary" class="text-green-400">20d GMT saving</span>
                    </div>
                </div>
            </div>

            
        </section>

        <!-- Calculate Button -->
        <section class="text-center">
            <button onclick="calculateReinvestment()" 
                    class="bg-purple-600 hover:bg-purple-700 px-8 py-3 rounded-lg font-bold text-lg transition-colors duration-200">
                Calculate Reinvestment Strategy
            </button>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="bg-gray-800 rounded-xl p-6 shadow-lg hidden">
            <h2 class="text-2xl font-bold mb-6 text-purple-400">Results</h2>
            
            <!-- Growth Chart -->
            <div class="mb-8">
                <h3 class="text-lg font-bold mb-4 text-gray-300">Growth Over Time</h3>
                <div class="chart-container bg-gray-700 rounded-lg p-4">
                    <canvas id="growthChart"></canvas>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-5 mb-8">
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Final TH Amount</h4>
                    <div id="final-th" class="text-2xl font-bold text-green-400">-</div>
                </div>
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Final Farm TH</h4>
                    <div id="final-farm-th" class="text-2xl font-bold text-yellow-400">-</div>
                </div>
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Final Farm W/TH</h4>
                    <div id="final-farm-efficiency" class="text-2xl font-bold text-orange-400">-</div>
                </div>
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Total Investment</h4>
                    <div id="total-investment" class="text-2xl font-bold text-blue-400">-</div>
                </div>
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Final GMT Balance</h4>
                    <div id="final-gmt-balance" class="text-2xl font-bold text-purple-400">-</div>
                </div>
                    <!-- NEU: Hold Days Card -->
                <div class="bg-gray-700 rounded-lg p-4">
                    <h4 class="text-sm font-medium text-gray-300 mb-2">Hold Days</h4>
                    <div id="hold-days" class="text-2xl font-bold text-red-400">-</div>
                    <div class="text-xs text-gray-400 mt-1">Insufficient GMT</div>
                </div>
                    <!-- NEU: Final BTC Card -->
                <div class="bg-gray-700 rounded-lg p-4">
                    <div class="text-sm text-gray-400">Final BTC Balance</div>
                    <div id="final-btc" class="text-2xl font-bold text-orange-400">-</div>
                </div>
   
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700" id="greedy-final-card" style="display: none;">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-yellow-500 bg-opacity-20">
                                <svg class="w-8 h-8 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-400 truncate">Final Greedy TH</dt>
                                    <dd class="text-lg font-bold text-yellow-400" id="greedy-final-th">0.00 TH</dd>
                                    <dd class="text-xs text-gray-500 mt-1" id="greedy-growth-info">Growth info</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
            </div>

            <!-- Detailed Results Table -->
            <div class="overflow-x-auto">
                <h3 class="text-lg font-bold mb-4 text-gray-300">Detailed Timeline</h3>
                <table class="results-table w-full bg-gray-700 rounded-lg overflow-hidden">
                    <thead>
                        <tr>
                            <th>Period</th>
                            <th>Date</th>
                            <th>TH Amount</th>
                            <th>Daily Profit (USD)</th>
                            <th>Reinvestment (USD)</th>
                            <th>GMT Balance</th>
                            <th>BTC Balance</th>
                            <th>Strategy</th>
                        </tr>
                    </thead>
                    <tbody id="results-table-body">
                        <!-- Results will be inserted here -->
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Overlay for Sidebar -->
    <div class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" id="sidebar-overlay" onclick="closeSidebar()"></div>

    <script>
        // Global variables for calculation
        let currentStrategy = 'controlled';
        let growthChart = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
           // setupEventListeners();
            updateControlledV2Settings();
        });
        function updatePeriodLabel() {
            const period = document.getElementById('chart-period').value;
            console.log('Chart period changed to:', period);
            // Keine Einschränkungen - der Benutzer soll frei wählen können
            // 25 Jahre, 50 Jahre oder mehr sind völlig in Ordnung
        }
        function initializePage() {
            // Load current BTC price
            loadCurrentBTCPrice();
            
            // Update controlled settings display
            updateControlledSettings();
        }

        function updateControlledSettings() {
            const autoDays = parseInt(document.getElementById('auto-days').value);
            const savingDays = 30 - autoDays;
            
            document.getElementById('auto-days-value').textContent = `${autoDays} days`;
            document.getElementById('saving-days-value').textContent = `${savingDays} days`;
        }
        function selectStrategy(strategy) {
            currentStrategy = strategy;
            
            // Update visual selection
            document.querySelectorAll('.strategy-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.strategy-card').classList.add('selected');
            
            // Show/hide controlled settings
            const controlledSettings = document.getElementById('controlled-settings');
            const controlledV2Settings = document.getElementById('controlledv2-settings');
            const greedySettings = document.getElementById('greedy-settings');
            
            if (strategy === 'controlled') {
                controlledSettings.style.display = 'block';
                controlledV2Settings.style.display = 'none';
                greedySettings.style.display = 'none';
            } else if (strategy === 'controlledv2') {
                controlledSettings.style.display = 'none';
                controlledV2Settings.style.display = 'block';
                greedySettings.style.display = 'none';
            } else if (strategy === 'greedy') {
                controlledSettings.style.display = 'none';
                controlledV2Settings.style.display = 'none';
                greedySettings.style.display = 'block';
                updateGreedyPreview();
            } else {
                controlledSettings.style.display = 'none';
                controlledV2Settings.style.display = 'none';
                greedySettings.style.display = 'none';
            }
            
            // Update table header visibility for BTC column
            updateTableHeader();
            
            // Recalculate if results are visible
            if (!document.getElementById('results-section').classList.contains('hidden')) {
                calculateReinvestment();
            }
        }
        


        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        }

        function updateBTCPrice() {
            const btcPrice = document.getElementById('bitcoin-price-dropdown').value;
            // This function would be connected to price update logic
            console.log('BTC Price updated to:', btcPrice);
        }

        async function loadCurrentBTCPrice() {
            try {
                // Use the existing price fetch functions from skript.js
                fetchBTCPrice();
                fetchGMTPrice();
            } catch (error) {
                console.log('Could not load current prices:', error);
                // Set defaults if price fetch fails
                document.getElementById('bitcoin-price-dropdown').value = '67000';
                document.getElementById('gmt-token-price').value = '0.4269';
            }
        }
        function toggleSeoContent() {
            const content = document.getElementById('seo-content');
            const icon = document.getElementById('seo-toggle-icon');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.textContent = 'expand_less';
            } else {
                content.classList.add('hidden');
                icon.textContent = 'expand_more';
            }
        }
 
        // Main calculation is handled in reinvest-calculator.js
    </script>
</body>
</html>